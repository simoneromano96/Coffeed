<template>
  <!-- V1
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill-rule="evenodd"
    stroke-miterlimit="10"
    clip-rule="evenodd"
    viewBox="0 0 45 41"
  >
    <path
      fill="#fff"
      fill-rule="nonzero"
      d="M13.87 36.24h9.23a9.61 9.61 0 009.67-9.41v-.12c0-7.42-6.4-13.44-14.28-13.44-7.9 0-14.29 6.02-14.29 13.44v.12a9.61 9.61 0 009.67 9.4z"
    />
    <clipPath :id="id" :style="getJarCss">
      <path d="M6.86 15.51h23.25V34.1H6.86z" />
    </clipPath>
    <g :clip-path="`url(#${id})`">
      <path
        fill="#67503b"
        fill-rule="nonzero"
        d="M14.73 34.1h7.51c4.27 0 7.84-3.4 7.87-7.66v-.1c0-6.03-5.2-10.93-11.62-10.93-6.42 0-11.63 4.9-11.63 10.94v.09a7.82 7.82 0 007.87 7.66z"
      />
    </g>
    <path
      fill="none"
      stroke="#333"
      stroke-width="1.58"
      d="M13.87 36.24h9.23a9.61 9.61 0 009.67-9.41v-.12c0-7.42-6.4-13.44-14.28-13.44-7.9 0-14.29 6.02-14.29 13.44v.12a9.61 9.61 0 009.67 9.4z"
    />
    <path
      fill="#333"
      fill-rule="nonzero"
      d="M9.96 3.96c-.9-.09-1.54.86-1.11 1.67l3.47 4.84v4.17c0 .48.4.87.87.87h10.33c.34 0 .66-.2.8-.53l1.06-2.47c.26-.61.39-1.26.39-1.92v-3c0-.6-.44-1.12-1.03-1.21L9.96 3.96z"
    />
    <path
      fill="#333"
      fill-rule="nonzero"
      d="M25.27 8.2c.45.2 1.07.2 1.57 0 .23-.09.5-.27.87-.57.37-.3.8-.7 1.36-1.13a6.5 6.5 0 012.05-1.05 7.8 7.8 0 012.12-.3 7 7 0 014.15 1.16 6.54 6.54 0 012.1 2.46c.09.15.16.3.23.46l.2.54a7.61 7.61 0 010 4.04c-.27 1.18-.66 2.22-.93 3.19-.14.49-.27.99-.32 1.38-.05.41-.03.72.06.95l.03.07a1.24 1.24 0 01-2.26 1.02 4.38 4.38 0 01-.43-2.24c.04-.69.15-1.25.26-1.82.23-1.14.53-2.17.67-3.12.15-.96.13-1.81-.13-2.4l-.1-.22-.16-.26c-.1-.17-.21-.33-.34-.46-.24-.29-.5-.5-.79-.68-1.04-.64-3.18-.44-3.94.4-.3.26-.64.63-1.08 1.06a6.49 6.49 0 01-6.55 1.8l-.13-.05a2.25 2.25 0 111.5-4.23z"
    />
  </svg>
  -->
  <svg
    width="100%"
    height="100%"
    viewBox="0 0 45 41"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xml:space="preserve"
    xmlns:serif="http://www.serif.com/"
    style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:10;"
  >
    <path
      id="Jar"
      d="M13.874,36.238l9.226,0c5.241,0 9.628,-4.171 9.673,-9.412c0.001,-0.038 0.001,-0.074 0.001,-0.112c0,-7.426 -6.397,-13.446 -14.287,-13.446c-7.89,0 -14.286,6.02 -14.286,13.446c0,0.038 0,0.074 0,0.112c0.045,5.241 4.432,9.412 9.673,9.412Z"
      style="fill:#fff;fill-rule:nonzero;"
    />
    <clipPath :id="id" :style="getJarCss">
      <path
        :class="`anime-target-${id}`"
        id="CoffeeLiquid"
        d="M30.112,15.51c0,0 -3.912,-3.735 -5.849,-3.735c-1.926,0 -3.851,3.735 -5.776,3.735c-1.937,0 -3.912,-3.735 -5.849,-3.735c-1.926,0 -5.776,3.735 -5.776,3.735l0,18.589l23.25,0l0,-18.589Z"
      />
    </clipPath>
    <g :clip-path="`url(#${id})`">
      <path
        d="M14.733,34.099l7.508,0c4.265,0 7.834,-3.395 7.871,-7.659c0,-0.031 0,-0.061 0,-0.091c0,-6.043 -5.205,-10.941 -11.625,-10.941c-6.42,0 -11.625,4.898 -11.625,10.941c0,0.03 0,0.06 0.001,0.091c0.036,4.264 3.606,7.659 7.87,7.659Z"
        style="fill:#67503b;fill-rule:nonzero;"
      />
    </g>
    <path
      d="M13.874,36.238l9.226,0c5.241,0 9.628,-4.171 9.673,-9.412c0.001,-0.038 0.001,-0.074 0.001,-0.112c0,-7.426 -6.397,-13.446 -14.287,-13.446c-7.89,0 -14.286,6.02 -14.286,13.446c0,0.038 0,0.074 0,0.112c0.045,5.241 4.432,9.412 9.673,9.412Z"
      style="fill:#fff;fill-opacity:0;fill-rule:nonzero;stroke:#333;stroke-width:1.58px;"
    />
    <path
      d="M9.964,3.964c-0.904,-0.094 -1.546,0.86 -1.118,1.662l3.478,4.841l0,4.173c0,0.48 0.389,0.87 0.87,0.87l10.322,0c0.348,0 0.663,-0.208 0.799,-0.527l1.061,-2.477c0.26,-0.606 0.394,-1.258 0.394,-1.918l0,-3.002c0,-0.6 -0.435,-1.111 -1.027,-1.208l-14.779,-2.414Z"
      style="fill:#333;fill-rule:nonzero;"
    />
    <path
      d="M25.274,8.203c0.445,0.189 1.069,0.198 1.562,-0.006c0.229,-0.084 0.509,-0.264 0.876,-0.57c0.364,-0.297 0.789,-0.701 1.354,-1.123c0.549,-0.423 1.325,-0.845 2.049,-1.05c0.731,-0.219 1.444,-0.299 2.121,-0.311c1.334,-0.04 2.908,0.292 4.151,1.167c0.62,0.433 1.147,0.974 1.563,1.556c0.211,0.292 0.388,0.595 0.549,0.901c0.078,0.154 0.147,0.309 0.219,0.464l0.202,0.538c0.463,1.482 0.271,2.876 0.008,4.041c-0.274,1.179 -0.667,2.222 -0.94,3.188c-0.138,0.488 -0.267,0.99 -0.317,1.385c-0.052,0.408 -0.028,0.717 0.06,0.944l0.028,0.072c0.247,0.639 -0.071,1.358 -0.71,1.606c-0.595,0.23 -1.261,-0.034 -1.55,-0.585c-0.393,-0.756 -0.463,-1.57 -0.43,-2.24c0.037,-0.688 0.148,-1.251 0.259,-1.819c0.236,-1.146 0.53,-2.17 0.671,-3.126c0.148,-0.952 0.126,-1.807 -0.131,-2.396l-0.104,-0.219l-0.152,-0.261c-0.107,-0.166 -0.217,-0.325 -0.338,-0.464c-0.241,-0.282 -0.507,-0.504 -0.794,-0.671c-1.036,-0.641 -3.185,-0.441 -3.944,0.403c-0.289,0.251 -0.632,0.621 -1.075,1.051c-0.436,0.422 -1.012,0.931 -1.764,1.319c-1.459,0.756 -3.155,0.94 -4.784,0.476l-0.135,-0.039c-1.194,-0.34 -1.887,-1.584 -1.547,-2.778c0.341,-1.195 1.585,-1.887 2.779,-1.547c0.087,0.026 0.183,0.061 0.264,0.094Z"
      style="fill:#333;fill-rule:nonzero;"
    />
  </svg>
</template>

<style lang="scss" scoped>
clipPath {
  transition: transform 1s;
}
</style>

<script lang="ts">
import { Component, Prop, Vue } from "vue-property-decorator"
import anime from "animejs"

@Component
export default class CoffeeCard extends Vue {
  @Prop() private loadingPercentage!: number
  @Prop() private id!: string

  private timeline = anime.timeline({
    autoplay: true,
    direction: "alternate",
    loop: true,
  })

  mounted() {
    this.timeline.add({
      targets: `.anime-target-${this.id}`,
      d: {
        value: [
          "M30.112,15.51c0,0 -3.912,3.765 -5.849,3.765c-1.926,0 -3.851,-3.765 -5.776,-3.765c-1.937,0 -3.912,3.765 -5.849,3.765c-1.926,0 -5.776,-3.765 -5.776,-3.765l0,18.589l23.25,0l0,-18.589Z",
        ],
        duration: 500,
        easing: "linear",
      },
    })
  }

  get getJarCss() {
    return `transform: translateY(${50 - this.loadingPercentage / 2}%)`
  }
}
</script>